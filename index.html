<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Educativo: Meningite para Pais</title>
    <style>
        /* ============================================
           RESET E VARIÁVEIS CSS
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Tema Claro */
            --bg-primary: #f8f9ff;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-blue: #6366f1;
            --accent-purple: #a855f7;
            --correct: #10b981;
            --incorrect: #ef4444;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
            
            /* Tamanhos de fonte */
            --font-size-base: 16px;
            --font-size-scale: 1;
        }

        [data-theme="dark"] {
            /* Tema Escuro */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        /* ============================================
           ESTILOS GLOBAIS
           ============================================ */
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            font-size: calc(var(--font-size-base) * var(--font-size-scale));
            transition: all 0.3s ease;
        }

        /* ============================================
           CONTAINER PRINCIPAL
           ============================================ */
        .quiz-container {
            background: var(--bg-card);
            border-radius: 24px;
            box-shadow: 0 20px 60px var(--shadow);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* ============================================
           HEADER COM CONTROLES
           ============================================ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
        }

        .logo h1 {
            color: var(--text-primary);
            font-size: calc(1.5em * var(--font-size-scale));
            font-weight: 700;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent-blue);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn svg {
            width: 24px;
            height: 24px;
        }

        /* ============================================
           TELA DE SELEÇÃO DE DIFICULDADE
           ============================================ */
        .difficulty-screen {
            text-align: center;
            animation: fadeIn 0.6s ease;
        }

        .difficulty-screen.hidden {
            display: none;
        }

        .difficulty-title {
            color: var(--text-primary);
            font-size: calc(2em * var(--font-size-scale));
            margin-bottom: 15px;
            font-weight: 700;
        }

        .difficulty-subtitle {
            color: var(--text-secondary);
            font-size: calc(1.1em * var(--font-size-scale));
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .difficulty-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .difficulty-card {
            background: var(--bg-secondary);
            border: 3px solid var(--border);
            border-radius: 20px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .difficulty-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            transition: all 0.3s ease;
        }

        .difficulty-card.basic::before {
            background: linear-gradient(90deg, #10b981, #34d399);
        }

        .difficulty-card.intermediate::before {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
        }

        .difficulty-card.advanced::before {
            background: linear-gradient(90deg, #ef4444, #f87171);
        }

        .difficulty-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: 0 12px 30px var(--shadow);
        }

        .difficulty-card:hover::before {
            height: 8px;
        }

        .difficulty-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
        }

        .difficulty-name {
            color: var(--text-primary);
            font-size: calc(1.3em * var(--font-size-scale));
            font-weight: 700;
            margin-bottom: 10px;
        }

        .difficulty-description {
            color: var(--text-secondary);
            font-size: calc(0.9em * var(--font-size-scale));
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .difficulty-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--border);
        }

        .difficulty-info-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: calc(0.85em * var(--font-size-scale));
        }

        .difficulty-info-item svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: calc(0.8em * var(--font-size-scale));
            font-weight: 600;
            margin-top: 10px;
        }

        .difficulty-card.basic .difficulty-badge {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .difficulty-card.intermediate .difficulty-badge {
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .difficulty-card.advanced .difficulty-badge {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        /* ============================================
           BARRA DE PROGRESSO
           ============================================ */
        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            color: var(--text-secondary);
            font-size: calc(0.9em * var(--font-size-scale));
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            border-radius: 12px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ============================================
           CARD DE PERGUNTA
           ============================================ */
        .question-card {
            animation: slideIn 0.5s ease;
        }

        .question-card.hidden {
            display: none;
        }

        .difficulty-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: calc(0.85em * var(--font-size-scale));
            font-weight: 600;
            margin-bottom: 20px;
        }

        .difficulty-indicator.basic {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .difficulty-indicator.intermediate {
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .difficulty-indicator.advanced {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .question-text {
            color: var(--text-primary);
            font-size: calc(1.3em * var(--font-size-scale));
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* ============================================
           BOTÕES DE OPÇÃO
           ============================================ */
        .option-btn {
            background: var(--bg-secondary);
            border: 3px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: calc(1em * var(--font-size-scale));
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--accent-blue);
            transform: translateX(5px);
            box-shadow: 0 4px 20px var(--shadow);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-btn.correct {
            background: var(--correct);
            border-color: var(--correct);
            color: white;
            animation: pulse 0.5s ease;
        }

        .option-btn.incorrect {
            background: var(--incorrect);
            border-color: var(--incorrect);
            color: white;
            animation: shake 0.5s ease;
        }

        .option-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .option-btn.correct .option-icon,
        .option-btn.incorrect .option-icon {
            opacity: 1;
        }

        /* ============================================
           FEEDBACK DE RESPOSTA
           ============================================ */
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 16px;
            display: none;
            animation: slideIn 0.4s ease;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid var(--correct);
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--incorrect);
        }

        .feedback-text {
            color: var(--text-primary);
            font-size: calc(1em * var(--font-size-scale));
            line-height: 1.6;
        }

        /* ============================================
           BOTÃO PRÓXIMA PERGUNTA
           ============================================ */
        .next-btn {
            margin-top: 25px;
            width: 100%;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
            border: none;
            border-radius: 16px;
            padding: 18px;
            font-size: calc(1.1em * var(--font-size-scale));
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn.show {
            display: block;
            animation: slideIn 0.4s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }

        .next-btn:active {
            transform: translateY(0);
        }

        /* ============================================
           BADGES DE CONQUISTA
           ============================================ */
        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            padding: 20px 30px;
            border-radius: 16px;
            margin: 30px auto;
            box-shadow: 0 8px 24px rgba(255, 215, 0, 0.4);
            animation: badgeAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-width: 400px;
        }

        .achievement-badge.bronze {
            background: linear-gradient(135deg, #cd7f32 0%, #e5a05d 50%, #cd7f32 100%);
            box-shadow: 0 8px 24px rgba(205, 127, 50, 0.4);
        }

        .achievement-badge.silver {
            background: linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 50%, #c0c0c0 100%);
            box-shadow: 0 8px 24px rgba(192, 192, 192, 0.4);
        }

        .achievement-badge.gold {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            box-shadow: 0 8px 24px rgba(255, 215, 0, 0.4);
        }

        .achievement-badge.diamond {
            background: linear-gradient(135deg, #b9f2ff 0%, #ffffff 50%, #b9f2ff 100%);
            box-shadow: 0 8px 24px rgba(185, 242, 255, 0.6);
        }

        .achievement-badge.participation {
            background: linear-gradient(135deg, #94a3b8 0%, #cbd5e1 50%, #94a3b8 100%);
            box-shadow: 0 8px 24px rgba(148, 163, 184, 0.4);
        }

        .badge-icon {
            font-size: 3em;
            flex-shrink: 0;
        }

        .badge-content {
            text-align: left;
        }

        .badge-title {
            font-size: calc(1.3em * var(--font-size-scale));
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .badge-description {
            font-size: calc(0.9em * var(--font-size-scale));
            color: #334155;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .performance-message {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 24px;
            margin: 25px auto;
            max-width: 500px;
            border-left: 6px solid;
        }

        .performance-message.excellent {
            border-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%);
        }

        .performance-message.good {
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, transparent 100%);
        }

        .performance-message.regular {
            border-color: #f59e0b;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, transparent 100%);
        }

        .performance-message.needs-improvement {
            border-color: #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, transparent 100%);
        }

        .performance-title {
            font-size: calc(1.2em * var(--font-size-scale));
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .performance-text {
            font-size: calc(1em * var(--font-size-scale));
            color: var(--text-secondary);
            line-height: 1.6;
        }

        @keyframes badgeAppear {
            0% {
                opacity: 0;
                transform: scale(0) rotate(-180deg);
            }
            50% {
                transform: scale(1.1) rotate(10deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        /* ============================================
           TELA DE RESULTADOS
           ============================================ */
        .results-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.6s ease;
        }

        .results-screen.show {
            display: block;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 30px auto;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 10px 40px var(--shadow);
            animation: scaleIn 0.5s ease;
        }

        .score-number {
            font-size: calc(3.5em * var(--font-size-scale));
            font-weight: 700;
        }

        .score-label {
            font-size: calc(1.1em * var(--font-size-scale));
            opacity: 0.9;
        }

        .results-title {
            color: var(--text-primary);
            font-size: calc(2em * var(--font-size-scale));
            margin-bottom: 15px;
        }

        .results-message {
            color: var(--text-secondary);
            font-size: calc(1.1em * var(--font-size-scale));
            margin-bottom: 40px;
        }

        /* ============================================
           REVISÃO DE ERROS
           ============================================ */
        .review-section {
            margin-top: 40px;
            text-align: left;
        }

        .review-title {
            color: var(--text-primary);
            font-size: calc(1.5em * var(--font-size-scale));
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .review-item {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .review-question {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 10px;
            font-size: calc(1em * var(--font-size-scale));
        }

        .review-answer {
            color: var(--text-secondary);
            font-size: calc(0.95em * var(--font-size-scale));
            line-height: 1.5;
        }

        .review-answer strong {
            color: var(--correct);
        }

        /* ============================================
           BOTÕES DE AÇÃO
           ============================================ */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-size: calc(1em * var(--font-size-scale));
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
        }

        .action-btn.secondary {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            color: var(--text-primary);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow);
        }

        .action-btn svg {
            width: 20px;
            height: 20px;
        }

        /* ============================================
           ANIMAÇÕES
           ============================================ */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-10px);
            }
            75% {
                transform: translateX(10px);
            }
        }

        /* ============================================
           RESPONSIVIDADE
           ============================================ */
        @media (max-width: 768px) {
            .quiz-container {
                padding: 25px;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .logo h1 {
                font-size: calc(1.2em * var(--font-size-scale));
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                min-width: 100%;
            }

            .score-circle {
                width: 160px;
                height: 160px;
            }

            .difficulty-cards {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           ACESSIBILIDADE: FOCO
           ============================================ */
        button:focus-visible,
        .option-btn:focus-visible {
            outline: 3px solid var(--accent-blue);
            outline-offset: 3px;
        }

        /* Toast de notificação */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 16px 24px;
            box-shadow: 0 10px 40px var(--shadow);
            display: none;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            display: flex;
        }

        .toast-text {
            color: var(--text-primary);
            font-size: calc(0.95em * var(--font-size-scale));
        }
    </style>
</head>
<body>
    <div class="quiz-container" role="main">
        <!-- ============================================
             HEADER COM LOGO E CONTROLES
             ============================================ -->
        <header class="header">
            <div class="logo">
                <!-- Logo SVG: Ícone médico -->
                <svg class="logo-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="24" cy="24" r="22" fill="url(#gradient1)"/>
                    <path d="M24 12v24M12 24h24" stroke="white" stroke-width="4" stroke-linecap="round"/>
                    <defs>
                        <linearGradient id="gradient1" x1="0" y1="0" x2="48" y2="48">
                            <stop offset="0%" style="stop-color:#6366f1"/>
                            <stop offset="100%" style="stop-color:#a855f7"/>
                        </linearGradient>
                    </defs>
                </svg>
                <h1>Quiz sobre Meningite</h1>
            </div>
            
            <div class="controls" role="toolbar" aria-label="Controles de preferências">
                <!-- Botão Tema -->
                <button class="control-btn" id="themeToggle" aria-label="Alternar tema claro/escuro" title="Alternar tema">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>
                
                <!-- Botão Diminuir Fonte -->
                <button class="control-btn" id="decreaseFont" aria-label="Diminuir tamanho da fonte" title="Diminuir fonte">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 7h16M8 11h8M10 15h4"/>
                    </svg>
                </button>
                
                <!-- Botão Aumentar Fonte -->
                <button class="control-btn" id="increaseFont" aria-label="Aumentar tamanho da fonte" title="Aumentar fonte">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 7h16M6 11h12M8 15h8"/>
                    </svg>
                </button>
                
                <!-- Botão Música -->
                <button class="control-btn" id="musicToggle" aria-label="Ligar/desligar música de fundo" title="Música de fundo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13"/>
                        <circle cx="6" cy="18" r="3"/>
                        <circle cx="18" cy="16" r="3"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- ============================================
             TELA DE SELEÇÃO DE DIFICULDADE
             ============================================ -->
        <div class="difficulty-screen" id="difficultyScreen">
            <h2 class="difficulty-title">Escolha o Nível de Dificuldade</h2>
            <p class="difficulty-subtitle">Selecione o nível que melhor corresponde ao seu conhecimento sobre meningite</p>
            
            <div class="difficulty-cards">
                <!-- Básico -->
                <div class="difficulty-card basic" data-level="basic" role="button" tabindex="0" aria-label="Nível Básico">
                    <svg class="difficulty-icon" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="30" cy="30" r="28" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                        <path d="M30 15v30M15 30h30" stroke="#10b981" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                    <h3 class="difficulty-name">Básico</h3>
                    <p class="difficulty-description">Perfeito para começar. Conceitos fundamentais sobre meningite.</p>
                    <div class="difficulty-info">
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            <span>6 perguntas</span>
                        </div>
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                            <span>Conceitos gerais</span>
                        </div>
                    </div>
                    <span class="difficulty-badge">Iniciante</span>
                </div>

                <!-- Intermediário -->
                <div class="difficulty-card intermediate" data-level="intermediate" role="button" tabindex="0" aria-label="Nível Intermediário">
                    <svg class="difficulty-icon" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="30" cy="30" r="28" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                        <path d="M20 40l10-20 10 20" stroke="#f59e0b" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M24 33h12" stroke="#f59e0b" stroke-width="3" stroke-linecap="round"/>
                    </svg>
                    <h3 class="difficulty-name">Intermediário</h3>
                    <p class="difficulty-description">Aprofunde seu conhecimento com questões mais detalhadas.</p>
                    <div class="difficulty-info">
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            <span>6 perguntas</span>
                        </div>
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                            <span>Prevenção e tratamento</span>
                        </div>
                    </div>
                    <span class="difficulty-badge">Moderado</span>
                </div>

                <!-- Avançado -->
                <div class="difficulty-card advanced" data-level="advanced" role="button" tabindex="0" aria-label="Nível Avançado">
                    <svg class="difficulty-icon" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="30" cy="30" r="28" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
                        <path d="M30 15L22 35h16L30 15z" stroke="#ef4444" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="30" cy="31" r="1.5" fill="#ef4444"/>
                        <path d="M30 23v5" stroke="#ef4444" stroke-width="3" stroke-linecap="round"/>
                    </svg>
                    <h3 class="difficulty-name">Avançado</h3>
                    <p class="difficulty-description">Desafie-se com questões médicas complexas e específicas.</p>
                    <div class="difficulty-info">
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                            <span>6 perguntas</span>
                        </div>
                        <div class="difficulty-info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                            <span>Aspectos médicos</span>
                        </div>
                    </div>
                    <span class="difficulty-badge">Desafiador</span>
                </div>
            </div>
        </div>

        <!-- ============================================
             BARRA DE PROGRESSO
             ============================================ -->
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-info">
                <span id="currentQuestion" aria-live="polite">Pergunta 1 de 6</span>
                <span id="currentScore" aria-live="polite">Pontuação: 0</span>
            </div>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- ============================================
             CARD DE PERGUNTA (Visível durante o quiz)
             ============================================ -->
        <div class="question-card hidden" id="questionCard">
            <div class="difficulty-indicator" id="difficultyIndicator">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                </svg>
                <span id="difficultyText">Nível: Básico</span>
            </div>
            <h2 class="question-text" id="questionText"></h2>
            
            <div class="options-container" id="optionsContainer" role="radiogroup" aria-labelledby="questionText">
                <!-- Opções serão inseridas aqui dinamicamente -->
            </div>

            <!-- Feedback da resposta -->
            <div class="feedback" id="feedback" role="alert" aria-live="assertive">
                <p class="feedback-text" id="feedbackText"></p>
            </div>

            <!-- Botão Próxima Pergunta -->
            <button class="next-btn" id="nextBtn">Próxima Pergunta</button>
        </div>

        <!-- ============================================
             TELA DE RESULTADOS (Visível ao final)
             ============================================ -->
        <div class="results-screen" id="resultsScreen">
            <div class="score-circle" role="img" aria-label="Pontuação final">
                <div class="score-number" id="finalScore">0</div>
                <div class="score-label">de 6</div>
            </div>

            <h2 class="results-title" id="resultsTitle">Parabéns!</h2>
            
            <!-- Badge de Conquista -->
            <div id="achievementBadge"></div>
            
            <!-- Mensagem de Performance -->
            <div id="performanceMessage"></div>
            
            <p class="results-message" id="resultsMessage">Você completou o quiz sobre meningite.</p>

            <!-- Seção de Revisão de Erros -->
            <div class="review-section" id="reviewSection">
                <h3 class="review-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                    Revisão e Aprendizado
                </h3>
                <div id="reviewContent">
                    <!-- Itens de revisão serão inseridos aqui -->
                </div>
            </div>

            <!-- Botões de Ação -->
            <div class="action-buttons">
                <button class="action-btn secondary" id="shareBtn" aria-label="Compartilhar resultado">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"/>
                        <circle cx="6" cy="12" r="3"/>
                        <circle cx="18" cy="19" r="3"/>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                    </svg>
                    Compartilhar Resultado
                </button>
                
                <button class="action-btn primary" id="restartBtn" aria-label="Reiniciar quiz">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2v6h-6"/>
                        <path d="M3 12a9 9 0 0 1 15-6.7L21 8"/>
                        <path d="M3 22v-6h6"/>
                        <path d="M21 12a9 9 0 0 1-15 6.7L3 16"/>
                    </svg>
                    Refazer Quiz
                </button>
            </div>
        </div>
    </div>

    <!-- Toast de notificação -->
    <div class="toast" id="toast" role="status" aria-live="polite">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"/>
        </svg>
        <span class="toast-text" id="toastText"></span>
    </div>

    <!-- ============================================
         JAVASCRIPT - LÓGICA DO QUIZ
         ============================================ -->
    <script type="module">
        // ============================================
        // DADOS DO QUIZ: Perguntas sobre Meningite por Nível
        // ============================================
        
        /**
         * Banco de perguntas organizado por nível de dificuldade
         * Cada nível contém 6 perguntas específicas
         */
        const quizDataByLevel = {
            // ============================================
            // NÍVEL BÁSICO: Conceitos fundamentais
            // ============================================
            basic: [
            {
                    question: "O que é meningite?",
                    options: [
                        "Uma inflamação das membranas que envolvem o cérebro e a medula espinhal",
                        "Uma infecção apenas nos pulmões",
                        "Um tipo de dor de cabeça comum",
                        "Uma doença que afeta apenas crianças"
                    ],
                    correct: 0,
                    explanation: "A meningite é uma inflamação das meninges, membranas que protegem o cérebro e a medula espinhal. Pode ser causada por vírus, bactérias ou fungos."
                },
                {
                    question: "Quais são os principais sintomas da meningite em crianças?",
                    options: [
                        "Apenas febre alta",
                        "Febre alta, rigidez na nuca, dor de cabeça intensa e sensibilidade à luz",
                        "Tosse e espirros frequentes",
                        "Dor nas articulações apenas"
                    ],
                    correct: 1,
                    explanation: "Os sintomas clássicos incluem febre alta, rigidez na nuca, dor de cabeça intensa, vômitos e sensibilidade à luz. Em bebês, pode haver irritabilidade e moleira tensa."
                },
                {
                    question: "A vacinação pode prevenir alguns tipos de meningite?",
                    options: [
                        "Não, não existe vacina para meningite",
                        "Sim, mas apenas para adultos",
                        "Sim, existem vacinas que protegem contra vários tipos de meningite bacteriana",
                        "Apenas se a criança já teve meningite antes"
                    ],
                    correct: 2,
                    explanation: "Sim! O calendário vacinal brasileiro inclui vacinas contra meningite meningocócica (tipos A, C, W, Y) e meningite por Haemophilus influenzae tipo b, além da BCG que protege contra meningite tuberculosa."
                },
                {
                    question: "A meningite é contagiosa?",
                    options: [
                        "Não, nunca é contagiosa",
                        "Depende do tipo: meningite bacteriana e viral podem ser contagiosas",
                        "Apenas através do contato com sangue",
                        "Só é contagiosa depois de 30 dias"
                    ],
                    correct: 1,
                    explanation: "A meningite bacteriana e viral podem ser transmitidas de pessoa para pessoa através de gotículas respiratórias. A meningite fúngica geralmente não é contagiosa entre pessoas."
                },
                {
                    question: "O que fazer se suspeitar que alguém está com meningite?",
                    options: [
                        "Esperar alguns dias para ver se melhora",
                        "Dar apenas remédio para dor em casa",
                        "Procurar atendimento médico de emergência imediatamente",
                        "Aplicar compressas frias e esperar"
                    ],
                    correct: 2,
                    explanation: "A meningite é uma EMERGÊNCIA MÉDICA! Procure atendimento hospitalar imediatamente se houver suspeita. O diagnóstico e tratamento precoces são fundamentais para evitar sequelas graves ou óbito."
                },
                {
                    question: "Quais grupos têm maior risco de desenvolver meningite?",
                    options: [
                        "Apenas idosos acima de 80 anos",
                        "Bebês, crianças pequenas, adolescentes e pessoas com imunidade comprometida",
                        "Apenas adultos entre 30 e 40 anos",
                        "Somente pessoas que já tiveram a doença"
                    ],
                    correct: 1,
                    explanation: "Os grupos de maior risco incluem bebês menores de 2 anos, crianças pequenas, adolescentes e jovens adultos, além de pessoas com sistema imunológico comprometido. A vacinação adequada é essencial."
                }
            ],

            // ============================================
            // NÍVEL INTERMEDIÁRIO: Prevenção e tratamento
            // ============================================
            intermediate: [
                {
                    question: "Qual é a diferença principal entre meningite viral e bacteriana?",
                    options: [
                        "Não há diferença, ambas são idênticas",
                        "A viral é geralmente mais leve e autolimitada; a bacteriana é mais grave e requer antibióticos",
                        "A viral afeta apenas adultos",
                        "A bacteriana nunca causa febre"
                    ],
                    correct: 1,
                    explanation: "A meningite viral é geralmente menos grave e melhora sozinha. A bacteriana é uma emergência médica grave que requer tratamento imediato com antibióticos intravenosos."
                },
                {
                    question: "Quais vacinas do calendário infantil protegem contra meningite?",
                    options: [
                        "Apenas a vacina contra gripe",
                        "BCG, Pentavalente (Hib), Meningocócica C e ACWY",
                        "Não existem vacinas contra meningite no calendário público",
                        "Apenas a vacina contra hepatite"
                    ],
                    correct: 1,
                    explanation: "O SUS oferece: BCG (protege contra meningite tuberculosa), Pentavalente com Hib (Haemophilus influenzae tipo b), Meningocócica C aos 3 e 5 meses, e ACWY para adolescentes."
                },
                {
                    question: "Por que a meningite meningocócica é especialmente preocupante?",
                    options: [
                        "Porque não tem tratamento",
                        "Pode progredir rapidamente, causando sepse e morte em poucas horas",
                        "Afeta apenas pessoas acima de 60 anos",
                        "Não é contagiosa"
                    ],
                    correct: 1,
                    explanation: "A meningite meningocócica pode evoluir muito rapidamente, causando sepse (meningococcemia) que pode levar à morte em 24-48 horas. Por isso o tratamento deve ser iniciado imediatamente."
                },
                {
                    question: "Como é feito o diagnóstico definitivo de meningite?",
                    options: [
                        "Apenas através de exame de sangue",
                        "Punção lombar (coleta de líquido cefalorraquidiano) e análise laboratorial",
                        "Raio-X do tórax",
                        "Apenas por avaliação clínica dos sintomas"
                    ],
                    correct: 1,
                    explanation: "O diagnóstico definitivo é feito pela análise do líquido cefalorraquidiano (líquor) coletado por punção lombar, que identifica o agente causador e guia o tratamento adequado."
                },
                {
                    question: "Quais são as possíveis sequelas da meningite bacteriana?",
                    options: [
                        "Não deixa sequelas",
                        "Surdez, déficits neurológicos, epilepsia, dificuldades de aprendizagem",
                        "Apenas cansaço temporário",
                        "Perda de visão exclusivamente"
                    ],
                    correct: 1,
                    explanation: "A meningite bacteriana pode deixar sequelas graves como perda auditiva, déficits neurológicos, convulsões, problemas de aprendizagem, amputações (em casos de sepse) e até causar óbito."
                },
                {
                    question: "Por que adolescentes têm risco aumentado para meningite meningocócica?",
                    options: [
                        "Porque não podem tomar vacinas",
                        "Maior convívio social, aglomerações e podem ser portadores assintomáticos da bactéria",
                        "Não têm risco aumentado",
                        "Porque não praticam higiene"
                    ],
                    correct: 1,
                    explanation: "Adolescentes têm maior taxa de colonização nasofaríngea pela bactéria e maior convívio em ambientes fechados e aglomerados (escolas, festas), facilitando a transmissão. Por isso a vacinação nessa faixa é crucial."
                }
            ],

            // ============================================
            // NÍVEL AVANÇADO: Aspectos médicos específicos
            // ============================================
            advanced: [
                {
                    question: "Qual a diferença entre meningite asséptica e séptica?",
                    options: [
                        "Não há diferença",
                        "Asséptica: líquor com células mas cultura negativa (geralmente viral). Séptica: cultura bacteriana positiva",
                        "Asséptica é mais grave",
                        "Séptica não causa inflamação"
                    ],
                    correct: 1,
                    explanation: "Meningite asséptica apresenta pleocitose liquórica (aumento de células) mas cultura negativa para bactérias, comum em meningites virais. Meningite séptica tem cultura bacteriana positiva."
                },
                {
                    question: "Qual é a tríade clássica da meningite?",
                    options: [
                        "Febre, tosse e dor abdominal",
                        "Febre, rigidez de nuca e alteração do estado mental",
                        "Vômito, diarreia e febre",
                        "Dor de cabeça, dor nas costas e febre baixa"
                    ],
                    correct: 1,
                    explanation: "A tríade clássica é: febre, rigidez de nuca e alteração do estado mental (confusão, sonolência). Porém, nem todos os pacientes apresentam os três sinais, especialmente lactentes e idosos."
                },
                {
                    question: "O que são os sinais de Kernig e Brudzinski?",
                    options: [
                        "Tipos de vacinas",
                        "Sinais clínicos de irritação meníngea: dor à extensão da perna e flexão involuntária das pernas",
                        "Exames de sangue específicos",
                        "Tipos de antibióticos"
                    ],
                    correct: 1,
                    explanation: "Kernig: dor/resistência ao estender a perna com quadril fletido. Brudzinski: flexão involuntária dos joelhos ao flexionar o pescoço. Ambos indicam irritação meníngea, mas têm sensibilidade limitada."
                },
                {
                    question: "Qual antibiótico empírico é usado inicialmente na meningite bacteriana antes da identificação do agente?",
                    options: [
                        "Amoxicilina via oral",
                        "Ceftriaxona ou Cefotaxima (cefalosporinas de 3ª geração) + Vancomicina",
                        "Azitromicina",
                        "Penicilina benzatina"
                    ],
                    correct: 1,
                    explanation: "O tratamento empírico inicial usa cefalosporinas de 3ª geração (ceftriaxona/cefotaxima) associadas à vancomicina para cobrir pneumococos resistentes, até identificação do agente e antibiograma."
                },
                {
                    question: "Qual o papel da dexametasona no tratamento da meningite bacteriana?",
                    options: [
                        "Não tem indicação",
                        "Corticoide usado para reduzir inflamação e sequelas neurológicas, especialmente em meningite pneumocócica",
                        "É o antibiótico principal",
                        "Usado apenas em meningite viral"
                    ],
                    correct: 1,
                    explanation: "Dexametasona é administrada antes ou junto com o antibiótico para reduzir a resposta inflamatória e diminuir sequelas como surdez, especialmente em meningite por pneumococo e Hib."
                },
                {
                    question: "O que é profilaxia pós-exposição e quando está indicada?",
                    options: [
                        "Não existe profilaxia para meningite",
                        "Antibióticos (rifampicina, ciprofloxacino) para contatos próximos de casos de meningite meningocócica",
                        "Vacina aplicada após exposição",
                        "Isolamento por 30 dias"
                    ],
                    correct: 1,
                    explanation: "Contatos próximos de casos de meningite meningocócica devem receber quimioprofilaxia com rifampicina, ciprofloxacino ou ceftriaxona nas primeiras 24h para prevenir doença secundária."
                }
            ]
        };

        // Referência ao conjunto de perguntas atual (será definido após seleção de nível)
        let quizData = [];

        // ============================================
        // VARIÁVEIS GLOBAIS DE ESTADO
        // ============================================
        let currentQuestionIndex = 0;
        let score = 0;
        let wrongAnswers = [];
        let audioContext = null;
        let backgroundMusic = null;
        let isMusicPlaying = false;
        let selectedDifficulty = null; // Armazena o nível selecionado

        // ============================================
        // ELEMENTOS DO DOM
        // ============================================
        const elements = {
            difficultyScreen: document.getElementById('difficultyScreen'),
            questionCard: document.getElementById('questionCard'),
            resultsScreen: document.getElementById('resultsScreen'),
            difficultyIndicator: document.getElementById('difficultyIndicator'),
            difficultyText: document.getElementById('difficultyText'),
            questionText: document.getElementById('questionText'),
            optionsContainer: document.getElementById('optionsContainer'),
            feedback: document.getElementById('feedback'),
            feedbackText: document.getElementById('feedbackText'),
            nextBtn: document.getElementById('nextBtn'),
            currentQuestion: document.getElementById('currentQuestion'),
            currentScore: document.getElementById('currentScore'),
            progressFill: document.getElementById('progressFill'),
            finalScore: document.getElementById('finalScore'),
            resultsTitle: document.getElementById('resultsTitle'),
            resultsMessage: document.getElementById('resultsMessage'),
            reviewContent: document.getElementById('reviewContent'),
            reviewSection: document.getElementById('reviewSection'),
            themeToggle: document.getElementById('themeToggle'),
            increaseFont: document.getElementById('increaseFont'),
            decreaseFont: document.getElementById('decreaseFont'),
            musicToggle: document.getElementById('musicToggle'),
            shareBtn: document.getElementById('shareBtn'),
            restartBtn: document.getElementById('restartBtn'),
            toast: document.getElementById('toast'),
            toastText: document.getElementById('toastText')
        };

        // ============================================
        // SISTEMA DE ÁUDIO: Web Audio API
        // ============================================
        
        /**
         * Inicializa o contexto de áudio (necessário após interação do usuário)
         */
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        /**
         * Toca um som de feedback - Correto (frequências agradáveis)
         */
        function playCorrectSound() {
            initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 523.25; // Dó
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
            
            // Segundo tom harmônico
            setTimeout(() => {
                const osc2 = audioContext.createOscillator();
                const gain2 = audioContext.createGain();
                osc2.connect(gain2);
                gain2.connect(audioContext.destination);
                osc2.frequency.value = 659.25; // Mi
                osc2.type = 'sine';
                gain2.gain.setValueAtTime(0.2, audioContext.currentTime);
                gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                osc2.start(audioContext.currentTime);
                osc2.stop(audioContext.currentTime + 0.4);
            }, 100);
        }

        /**
         * Toca um som de feedback - Incorreto (frequências dissonantes)
         */
        function playIncorrectSound() {
            initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 200;
            oscillator.type = 'sawtooth';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        /**
         * Inicia música de fundo ambiente (loop suave)
         */
        function startBackgroundMusic() {
            if (isMusicPlaying) return;
            
            initAudio();
            
            // Cria um loop musical simples e agradável
            const playMusicLoop = () => {
                if (!isMusicPlaying) return;
                
                const notes = [261.63, 293.66, 329.63, 392.00]; // Dó, Ré, Mi, Sol
                const duration = 0.4;
                
                notes.forEach((freq, index) => {
                    setTimeout(() => {
                        if (!isMusicPlaying) return;
                        
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        
                        osc.frequency.value = freq;
                        osc.type = 'sine';
                        
                        gain.gain.setValueAtTime(0.05, audioContext.currentTime);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                        
                        osc.start(audioContext.currentTime);
                        osc.stop(audioContext.currentTime + duration);
                    }, index * duration * 1000);
                });
                
                // Loop contínuo
                setTimeout(playMusicLoop, notes.length * duration * 1000);
            };
            
            isMusicPlaying = true;
            playMusicLoop();
        }

        /**
         * Para a música de fundo
         */
        function stopBackgroundMusic() {
            isMusicPlaying = false;
        }

        // ============================================
        // SISTEMA DE TEMA (Claro/Escuro)
        // ============================================
        
        /**
         * Carrega o tema salvo no localStorage
         */
        function loadTheme() {
            const savedTheme = localStorage.getItem('quizTheme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        /**
         * Alterna entre tema claro e escuro
         */
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('quizTheme', newTheme);
        }

        // ============================================
        // SISTEMA DE TAMANHO DE FONTE
        // ============================================
        
        /**
         * Carrega o tamanho de fonte salvo
         */
        function loadFontSize() {
            const savedScale = parseFloat(localStorage.getItem('fontScale')) || 1;
            document.documentElement.style.setProperty('--font-size-scale', savedScale);
        }

        /**
         * Aumenta o tamanho da fonte (máximo 1.5x)
         */
        function increaseFontSize() {
            const currentScale = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size-scale')) || 1;
            const newScale = Math.min(currentScale + 0.1, 1.5);
            document.documentElement.style.setProperty('--font-size-scale', newScale);
            localStorage.setItem('fontScale', newScale);
        }

        /**
         * Diminui o tamanho da fonte (mínimo 0.8x)
         */
        function decreaseFontSize() {
            const currentScale = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size-scale')) || 1;
            const newScale = Math.max(currentScale - 0.1, 0.8);
            document.documentElement.style.setProperty('--font-size-scale', newScale);
            localStorage.setItem('fontScale', newScale);
        }

        // ============================================
        // SISTEMA DE CONQUISTAS
        // ============================================
        
        /**
         * Dados de conquistas por dificuldade
         */
        const achievements = {
            basic: {
                diamond: { min: 100, title: 'Diamante', description: 'Perfeição Absoluta! 6/6', icon: '💎' },
                gold: { min: 83, title: 'Ouro', description: 'Excelente conhecimento! 5/6', icon: '🥇' },
                silver: { min: 67, title: 'Prata', description: 'Bom desempenho! 4/6', icon: '🥈' },
                bronze: { min: 50, title: 'Bronze', description: 'Continue estudando! 3/6', icon: '🥉' },
                participation: { min: 0, title: 'Participação', description: 'Tente novamente!', icon: '🎖️' }
            },
            intermediate: {
                diamond: { min: 100, title: 'Diamante', description: 'Domínio Total! 6/6', icon: '💎' },
                gold: { min: 83, title: 'Ouro', description: 'Conhecimento Sólido! 5/6', icon: '🥇' },
                silver: { min: 67, title: 'Prata', description: 'Bom caminho! 4/6', icon: '🥈' },
                bronze: { min: 50, title: 'Bronze', description: 'Precisa revisar! 3/6', icon: '🥉' },
                participation: { min: 0, title: 'Participação', description: 'Estude mais!', icon: '🎖️' }
            },
            advanced: {
                diamond: { min: 100, title: 'Diamante', description: 'Expert Absoluto! 6/6', icon: '💎' },
                gold: { min: 83, title: 'Ouro', description: 'Quase Expert! 5/6', icon: '🥇' },
                silver: { min: 67, title: 'Prata', description: 'Conhecimento Avançado! 4/6', icon: '🥈' },
                bronze: { min: 50, title: 'Bronze', description: 'Desafio difícil! 3/6', icon: '🥉' },
                participation: { min: 0, title: 'Participação', description: 'Tema complexo!', icon: '🎖️' }
            }
        };
        
        /**
         * Mensagens de performance por dificuldade
         */
        const performanceMessages = {
            basic: {
                excellent: { title: '🌟 Excelente!', text: 'Você domina os conceitos básicos sobre meningite! Seu conhecimento fundamental está sólido.' },
                good: { title: '😊 Muito Bom!', text: 'Você entende bem os fundamentos da meningite. Com um pouco mais de estudo, chegará à perfeição!' },
                regular: { title: '📚 Continue Estudando!', text: 'Você tem uma base, mas precisa reforçar alguns conceitos importantes sobre meningite.' },
                needsImprovement: { title: '💪 Vamos Melhorar!', text: 'É importante revisar os conceitos básicos sobre meningite para proteger melhor sua família.' }
            },
            intermediate: {
                excellent: { title: '🌟 Conhecimento Sólido!', text: 'Você tem um entendimento profundo sobre meningite! Está muito bem preparado para informar outros pais.' },
                good: { title: '😊 Ótimo Desempenho!', text: 'Seu conhecimento intermediário é consistente. Pequenos ajustes e você estará expert!' },
                regular: { title: '📚 Quase Lá!', text: 'Você está no caminho certo, mas alguns detalhes importantes precisam ser revisados.' },
                needsImprovement: { title: '💪 Revisar é Importante!', text: 'O nível intermediário é desafiador. Revise os materiais para fortalecer seu conhecimento.' }
            },
            advanced: {
                excellent: { title: '🌟 Expert em Meningite!', text: 'Parabéns! Seu conhecimento avançado é excepcional. Você pode ser uma referência sobre o tema!' },
                good: { title: '😊 Quase Expert!', text: 'Conhecimento avançado impressionante! Poucos detalhes técnicos separam você do domínio total.' },
                regular: { title: '📚 Nível Desafiador!', text: 'O conteúdo avançado é complexo. Você está bem, mas há aspectos técnicos para aprofundar.' },
                needsImprovement: { title: '💪 Tema Complexo!', text: 'O nível avançado é realmente difícil. Não desanime! Estude os conceitos técnicos com calma.' }
            }
        };
        
        /**
         * Obtém a conquista baseada na pontuação e dificuldade
         */
        function getAchievement(userScore, difficulty) {
            const percentage = (userScore / 6) * 100;
            const difficultyAchievements = achievements[difficulty];
            
            if (percentage >= difficultyAchievements.diamond.min) return { ...difficultyAchievements.diamond, level: 'diamond' };
            if (percentage >= difficultyAchievements.gold.min) return { ...difficultyAchievements.gold, level: 'gold' };
            if (percentage >= difficultyAchievements.silver.min) return { ...difficultyAchievements.silver, level: 'silver' };
            if (percentage >= difficultyAchievements.bronze.min) return { ...difficultyAchievements.bronze, level: 'bronze' };
            return { ...difficultyAchievements.participation, level: 'participation' };
        }
        
        /**
         * Obtém a mensagem de performance baseada na pontuação e dificuldade
         */
        function getPerformanceMessage(userScore, difficulty) {
            const percentage = (userScore / 6) * 100;
            const messages = performanceMessages[difficulty];
            
            if (percentage >= 83) return { ...messages.excellent, class: 'excellent' };
            if (percentage >= 67) return { ...messages.good, class: 'good' };
            if (percentage >= 50) return { ...messages.regular, class: 'regular' };
            return { ...messages.needsImprovement, class: 'needs-improvement' };
        }
        
        // ============================================
        // LÓGICA PRINCIPAL DO QUIZ
        // ============================================
        
        /**
         * Embaralha as opções de uma pergunta usando o algoritmo Fisher-Yates
         */
        function shuffleOptions(question) {
            const options = [...question.options];
            const correctAnswer = options[question.correct];
            
            // Embaralha o array
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }
            
            // Encontra o novo índice da resposta correta
            const newCorrectIndex = options.indexOf(correctAnswer);
            
            return { options, correctIndex: newCorrectIndex };
        }

        /**
         * Renderiza a pergunta atual na tela
         */
        function renderQuestion() {
            const question = quizData[currentQuestionIndex];
            const { options, correctIndex } = shuffleOptions(question);
            
            // Atualiza o texto da pergunta
            elements.questionText.textContent = question.question;
            
            // Limpa as opções anteriores
            elements.optionsContainer.innerHTML = '';
            
            // Cria os botões de opção
            options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.setAttribute('role', 'radio');
                button.setAttribute('aria-checked', 'false');
                button.setAttribute('tabindex', '0');
                
                // SVG de ícone (inicialmente invisível)
                const icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                icon.classList.add('option-icon');
                icon.setAttribute('viewBox', '0 0 24 24');
                icon.setAttribute('fill', 'none');
                icon.setAttribute('stroke', 'currentColor');
                icon.setAttribute('stroke-width', '3');
                
                const iconPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                icon.appendChild(iconPath);
                
                button.appendChild(icon);
                
                const text = document.createElement('span');
                text.textContent = option;
                button.appendChild(text);
                
                // Evento de clique
                button.addEventListener('click', () => handleAnswer(index, correctIndex, button, iconPath));
                
                // Navegação por teclado
                button.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleAnswer(index, correctIndex, button, iconPath);
                    }
                });
                
                elements.optionsContainer.appendChild(button);
            });
            
            // Reseta feedback e botão de próxima
            elements.feedback.classList.remove('show', 'correct', 'incorrect');
            elements.nextBtn.classList.remove('show');
            
            // Atualiza informações de progresso
            updateProgress();
        }

        /**
         * Manipula a resposta selecionada pelo usuário
         */
        function handleAnswer(selectedIndex, correctIndex, selectedButton, iconPath) {
            // Desabilita todos os botões após a seleção
            const allButtons = elements.optionsContainer.querySelectorAll('.option-btn');
            allButtons.forEach(btn => btn.disabled = true);
            
            const isCorrect = selectedIndex === correctIndex;
            
            // Aplica estilo visual e ícone
            if (isCorrect) {
                selectedButton.classList.add('correct');
                iconPath.setAttribute('d', 'M20 6L9 17l-5-5'); // Check mark
                playCorrectSound();
                score++;
                
                // Feedback positivo
                elements.feedbackText.textContent = '✓ Correto! ' + quizData[currentQuestionIndex].explanation;
                elements.feedback.classList.add('show', 'correct');
            } else {
                selectedButton.classList.add('incorrect');
                iconPath.setAttribute('d', 'M18 6L6 18M6 6l12 12'); // X mark
                playIncorrectSound();
                
                // Destaca a resposta correta
                allButtons[correctIndex].classList.add('correct');
                const correctIcon = allButtons[correctIndex].querySelector('.option-icon path');
                correctIcon.setAttribute('d', 'M20 6L9 17l-5-5');
                
                // Armazena resposta errada para revisão
                wrongAnswers.push({
                    question: quizData[currentQuestionIndex].question,
                    userAnswer: quizData[currentQuestionIndex].options[selectedIndex],
                    correctAnswer: quizData[currentQuestionIndex].options[quizData[currentQuestionIndex].correct],
                    explanation: quizData[currentQuestionIndex].explanation
                });
                
                // Feedback negativo
                elements.feedbackText.textContent = '✗ Incorreto. ' + quizData[currentQuestionIndex].explanation;
                elements.feedback.classList.add('show', 'incorrect');
            }
            
            // Mostra botão de próxima pergunta
            elements.nextBtn.classList.add('show');
            elements.nextBtn.focus(); // Foco para acessibilidade
            
            // Atualiza pontuação
            updateProgress();
        }

        /**
         * Atualiza as informações de progresso (pergunta atual e pontuação)
         */
        function updateProgress() {
            elements.currentQuestion.textContent = `Pergunta ${currentQuestionIndex + 1} de ${quizData.length}`;
            elements.currentScore.textContent = `Pontuação: ${score}`;
            
            const progressPercent = ((currentQuestionIndex + 1) / quizData.length) * 100;
            elements.progressFill.style.width = `${progressPercent}%`;
            elements.progressFill.parentElement.setAttribute('aria-valuenow', progressPercent);
        }

        /**
         * Avança para a próxima pergunta ou mostra os resultados
         */
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < quizData.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        /**
         * Exibe a tela de resultados finais
         */
        function showResults() {
            elements.questionCard.style.display = 'none';
            document.getElementById('progressContainer').style.display = 'none';
            elements.resultsScreen.classList.add('show');
            
            // Pontuação final
            elements.finalScore.textContent = score;
            
            // Obter conquista e mensagem de performance
            const achievement = getAchievement(score, selectedDifficulty);
            const performance = getPerformanceMessage(score, selectedDifficulty);
            
            // Renderizar badge de conquista
            const achievementBadge = document.getElementById('achievementBadge');
            achievementBadge.innerHTML = `
                <div class="achievement-badge ${achievement.level}">
                    <div class="badge-icon">${achievement.icon}</div>
                    <div class="badge-content">
                        <div class="badge-title">Medalha ${achievement.title}</div>
                        <div class="badge-description">${achievement.description}</div>
                    </div>
                </div>
            `;
            
            // Renderizar mensagem de performance
            const performanceMessageEl = document.getElementById('performanceMessage');
            performanceMessageEl.innerHTML = `
                <div class="performance-message ${performance.class}">
                    <div class="performance-title">${performance.title}</div>
                    <div class="performance-text">${performance.text}</div>
                </div>
            `;
            
            // Mensagem personalizada baseada no desempenho
            const percentage = (score / quizData.length) * 100;
            
            if (percentage === 100) {
                elements.resultsTitle.textContent = '🎉 Perfeito!';
                elements.resultsMessage.textContent = 'Você acertou todas as perguntas! Seu conhecimento sobre meningite é excelente.';
            } else if (percentage >= 70) {
                elements.resultsTitle.textContent = '👏 Muito Bem!';
                elements.resultsMessage.textContent = 'Ótimo desempenho! Você demonstra bom conhecimento sobre meningite.';
            } else if (percentage >= 50) {
                elements.resultsTitle.textContent = '👍 Bom Trabalho!';
                elements.resultsMessage.textContent = 'Você está no caminho certo! Continue aprendendo sobre meningite.';
            } else {
                elements.resultsTitle.textContent = '📚 Continue Aprendendo!';
                elements.resultsMessage.textContent = 'Revise os tópicos abaixo para fortalecer seu conhecimento sobre meningite.';
            }
            
            // Renderiza revisão de erros
            renderReview();
        }

        /**
         * Renderiza a seção de revisão com as respostas erradas
         */
        function renderReview() {
            if (wrongAnswers.length === 0) {
                elements.reviewSection.style.display = 'none';
                return;
            }
            
            elements.reviewContent.innerHTML = '';
            
            wrongAnswers.forEach((item, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                reviewItem.innerHTML = `
                    <div class="review-question">${index + 1}. ${item.question}</div>
                    <div class="review-answer">
                        <p><strong>✓ Resposta correta:</strong> ${item.correctAnswer}</p>
                        <p style="margin-top: 8px;"><em>${item.explanation}</em></p>
                    </div>
                `;
                
                elements.reviewContent.appendChild(reviewItem);
            });
        }

        /**
         * Compartilha o resultado do quiz (copia para área de transferência)
         */
        function shareResults() {
            const percentage = Math.round((score / quizData.length) * 100);
            
            const difficultyNames = {
                basic: 'Básico',
                intermediate: 'Intermediário',
                advanced: 'Avançado'
            };
            
            const achievement = getAchievement(score, selectedDifficulty);
            
            let shareText = `🧠 Quiz sobre Meningite para Pais\n\n`;
            shareText += `📊 Nível: ${difficultyNames[selectedDifficulty]}\n`;
            shareText += `${achievement.icon} Conquista: Medalha ${achievement.title}\n`;
            shareText += `📊 Minha pontuação: ${score}/${quizData.length} (${percentage}%)\n\n`;
            
            if (wrongAnswers.length > 0) {
                shareText += `📚 Aprendi sobre:\n`;
                wrongAnswers.forEach((item, index) => {
                    shareText += `${index + 1}. ${item.question}\n`;
                    shareText += `   ✓ ${item.correctAnswer}\n\n`;
                });
            } else {
                shareText += `🎉 Acertei todas as perguntas!\n\n`;
            }
            
            shareText += `A meningite é uma emergência médica. Conhecimento salva vidas! 💙`;
            
            // Copia para a área de transferência
            navigator.clipboard.writeText(shareText).then(() => {
                showToast('Resultado copiado para a área de transferência!');
            }).catch(() => {
                showToast('Não foi possível copiar. Tente novamente.');
            });
        }

        /**
         * Exibe notificação toast
         */
        function showToast(message) {
            elements.toastText.textContent = message;
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        /**
         * Reinicia o quiz voltando à seleção de dificuldade
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];
            selectedDifficulty = null;
            
            elements.resultsScreen.classList.remove('show');
            elements.questionCard.classList.add('hidden');
            document.getElementById('progressContainer').style.display = 'none';
            elements.difficultyScreen.classList.remove('hidden');
        }

        // ============================================
        // SISTEMA DE SELEÇÃO DE DIFICULDADE
        // ============================================
        
        /**
         * Inicia o quiz com o nível de dificuldade selecionado
         */
        function startQuizWithDifficulty(level) {
            selectedDifficulty = level;
            quizData = quizDataByLevel[level];
            
            // Atualiza indicador de dificuldade
            const difficultyNames = {
                basic: 'Básico',
                intermediate: 'Intermediário',
                advanced: 'Avançado'
            };
            
            elements.difficultyText.textContent = `Nível: ${difficultyNames[level]}`;
            elements.difficultyIndicator.className = `difficulty-indicator ${level}`;
            
            // Oculta tela de seleção e mostra quiz
            elements.difficultyScreen.classList.add('hidden');
            elements.questionCard.classList.remove('hidden');
            document.getElementById('progressContainer').style.display = 'block';
            
            // Inicia a primeira pergunta
            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];
            renderQuestion();
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        // Seleção de dificuldade
        document.querySelectorAll('.difficulty-card').forEach(card => {
            card.addEventListener('click', () => {
                const level = card.getAttribute('data-level');
                startQuizWithDifficulty(level);
            });
            
            // Navegação por teclado
            card.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const level = card.getAttribute('data-level');
                    startQuizWithDifficulty(level);
                }
            });
        });
        
        elements.themeToggle.addEventListener('click', toggleTheme);
        elements.increaseFont.addEventListener('click', increaseFontSize);
        elements.decreaseFont.addEventListener('click', decreaseFontSize);
        
        elements.musicToggle.addEventListener('click', () => {
            if (isMusicPlaying) {
                stopBackgroundMusic();
                elements.musicToggle.style.opacity = '0.5';
            } else {
                startBackgroundMusic();
                elements.musicToggle.style.opacity = '1';
            }
        });
        
        elements.nextBtn.addEventListener('click', nextQuestion);
        elements.shareBtn.addEventListener('click', shareResults);
        elements.restartBtn.addEventListener('click', restartQuiz);

        // ============================================
        // INICIALIZAÇÃO
        // ============================================
        
        /**
         * Inicializa o quiz ao carregar a página
         */
        function init() {
            loadTheme();
            loadFontSize();
            
            // Mostra tela de seleção de dificuldade
            elements.difficultyScreen.classList.remove('hidden');
            
            // Inicializa áudio após primeira interação do usuário
            document.addEventListener('click', initAudio, { once: true });
        }

        // Inicia o quiz
        init();
    </script>
</body>
</html>